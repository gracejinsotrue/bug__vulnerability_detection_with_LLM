import os
from openai import OpenAI

# Set your OpenAI API key here
api_key = "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"
client = OpenAI(api_key = api_key)

try:
    # When run, returns a training_file id. Plug this id into training_file below
    # print("attempting to upload training file")
    # training_response = client.files.create(
    #     file=open("cwe.jsonl", "rb"),
    #     purpose="fine-tune"
    # )
    # print("Training file response:", training_response)
    # print("Response should have been printed")

    #delete_response = client.files.delete('file-aRnEkyOcjhg4zEvLKUrkmMrs')
    #print(client.files.list())


    # Uncomment the following section AFTER running the above section.
    # Plug in the returned training_file id below BEFORE running.
    
    # fine_tune_response = client.fine_tuning.jobs.create(
    #     training_file="file-49IttPdeUXUxcT0FyJ6B2RJN",
    #     model="gpt-3.5-turbo"
    # )
    # print("Fine-tune job response:", fine_tune_response)

    # List 5 fine-tuning jobs
    print(client.fine_tuning.jobs.list(limit=5))

    # Retrieve the state of a fine-tune
    print(client.fine_tuning.jobs.retrieve("ftjob-bZfya3gmcpJfzcFwsvO2sWxB"))

except Exception as e:
    print("An error occurred:", e)