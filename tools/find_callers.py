from langchain_core.tools import tool
import tokenize
from io import StringIO

@tool

def find_callers(function_name: str, file_path: str) -> list:
    """
    Identifies the lines within a file where a specified function is called.

    Parameters:
    - function_name (str): Then name of the function to search for.
    - file_path (str): The path to the file in which to search for the function calls.

    Returns:
    list: A list of strings, each containing the line number and the function call.
    """
    callers = []

    with open(file_path, 'r') as file:
        source_code = file.read()

        tokens = tokenize.generate_tokens(StringIO(source_code).readline)

        for token in tokens:
            if token.type == tokenize.NAME and token.string == function_name:
                callers.append(f"Function {function_name} called at line {token.start[0]}")
        return callers