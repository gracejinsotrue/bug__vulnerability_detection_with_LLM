from langchain_core.tools import tool
from openai import OpenAI
import os
import json 


@tool
#def retrieve_source_code_function(function_name: str, file_path: str) -> str:
def retrieve_source_code_function(file_path: str) -> str:

    """
    Retrieves the source code of a given file.

    Parameters:
    -file_path (str): The path to the file containing the function.

    Returns:
    str: The source code of the specified function.
    """
    print(f"Attempting to open file: {file_path}")
    try:
        with open(file_path, 'r') as file:
            source_code = file.read()
            print(f"Successfully read file: {file_path}")
            print(f"Source code:\n{source_code[:200]}...")#print the first 200 characters of the source code
    except Exception as e:
        print(f"Failed to open file: {file_path}.  Error: {e}")
        return f"Failed to open file: {file_path}"

    return f"Source code of {file_path}\n{source_code}"
retrieve_source_code_function("find_callers.py")
